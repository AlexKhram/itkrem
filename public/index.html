<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="Keywords" content="IT события, IT ивенты, IT events, Кременчуг, Kremenchug"/>
    <meta name="description" content="Все IT события города Кременчуга на одном сайте. Присоединяйся к комьюнити. IT ивенты Кременчуга">
    <meta name="author" content="AlexKhram">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta name="robots" content="all"/>
    <title>IT события Кременчуга</title>
    <!-- microdata -->
    <meta property="og:locale" content="ru_Ru" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="IT события Кременчуга" />
	<meta property="og:description" content="Все IT события города Кременчуга на одном сайте. Присоединяйся к комьюнити." />
	<meta property="og:url" content="https://itkrem.com/" />
	<meta property="og:site_name" content="IT Krem" />
	<meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/itkrem-a14ca.appspot.com/o/logo.jpg?alt=media">
	<meta property="og:image:width" content="968">
	<meta property="og:image:height" content="504">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="IT события Кременчуга">
	<meta name="twitter:description" content="Все IT события города Кременчуга на одном сайте. Присоединяйся к комьюнити.">
	<meta name="twitter:image:src" content="https://firebasestorage.googleapis.com/v0/b/itkrem-a14ca.appspot.com/o/logo.jpg?alt=media">
	<meta name="twitter:url" content="https://itkrem.com/">
	<meta name="twitter:domain" content="itkrem.com">
	<meta name="twitter:site" content="itkrem.com">
	<meta name="twitter:creator" content="@AKhramenkov">
	<!-- styles -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.blue_grey-orange.min.css" />
	<link rel="stylesheet" href="itkrem.css">	
	<style type="text/css">
		.mdl-layout__drawer-button {
  			height: 38px;
  			margin: 0px;
		}
	</style>
</head>
<body>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class="mdl-layout__header header-m" style="min-height:42px;margin: 0px;">
    <div class="mdl-layout__header-row header-row">
      <span class="mdl-layout-title"><h4>IT события Кременчуга</h4></span>
      <div class="mdl-layout-spacer"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        <a class="mdl-navigation__link" href="/">Главная</a>
        <a class="mdl-navigation__link" href="/about.html">О сайте</a>
      </nav>
    </div>
  </header>
  <div itemscope itemtype="http://schema.org/SiteNavigationElement" class="mdl-layout__drawer">
    <span class="mdl-layout-title">IT Krem</span>
    <nav class="mdl-navigation">
      <a itemprop="url" class="mdl-navigation__link" href="/">Главная</a>
      <a itemprop="url" class="mdl-navigation__link" href="/about.html">О сайте</a>
    </nav>
  </div>
  <main class="mdl-layout__content">
    <div class="page-content">
    	<div id="eventBody" class="mdl-grid cards-section"></div>
        <div id="contentBody" class="mdl-grid cards-section"></div>
    </div>
  </main>
</div>

<script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
<script>
var microdataListItems = {
  					"@context": "http://schema.org",
  					"@type": "ItemList",
  					"itemListElement": []
  				};	
  				var indexPointer = 1;
  				var microdataListCounter = 1;
var ref = new Firebase("https://itkrem-a14ca.firebaseio.com/events");
ref.orderByChild("index").on("value", function(snapshot) {
    snapshot.forEach(function(childSnapshot) {
        var data = childSnapshot.val();

        //////////////////// create each block            	
 		var divCard = document.createElement('div');
 		divCard.className = "mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-card mdl-shadow--2dp";

		var divTitleText = document.createElement('div');
		divTitleText.className = "mdl-card__title card-title mdl-color-text--blue-grey";
					
		var h1Title = document.createElement('h2');
		h1Title.className = "mdl-card__title-text";
		h1Title.innerHTML = data['name'];

 		var divTitle = document.createElement('div');
 		divTitle.className = "mdl-card__title card-img";
 		divTitle.style.background = "url('" + data['image'] + "') center/cover"; 
 		divTitle.style.height = "250px";

		var divDesc = document.createElement('div');
		divDesc.className = "mdl-card__supporting-text card-desc";
		divDesc.style.minHeight = "100px";
		divDesc.innerHTML = data['desc'].substring(0,150)+"...";

		var fabButton = document.createElement('button');
		fabButton.className = "mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored";

		var iconForFab = document.createElement('i');
		iconForFab.className = "material-icons mdl-color-text--white";
		iconForFab.innerHTML = "send";

		var divAction = document.createElement('div');
		divAction.className = "mdl-card__actions mdl-card--border";

		var aLink = document.createElement('a');
		aLink.className = "mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect link";
		aLink.href = data['link'];
		aLink.target="_blank";
		aLink.innerHTML = data['date'];

		var divSpacer = document.createElement('div');
		divSpacer.className = "mdl-layout-spacer";

		var aReadMore = document.createElement('a');
		aReadMore.className = "mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect right read-more";
		aReadMore.href = "/"+data['searchName'];
		aReadMore.innerHTML = "подробнее";

//////////////////// collect all the blocks
		fabButton.appendChild(iconForFab);
		divTitle.appendChild(fabButton);
		divCard.appendChild(divTitle);
		divTitleText.appendChild(h1Title);
		divCard.appendChild(divTitleText);
		divCard.appendChild(divDesc);
		divAction.appendChild(aLink);
		divAction.appendChild(aReadMore);
		divCard.appendChild(divAction);

		contentBody.appendChild(divCard);
	
///////////////////// actions for card
		divCard.disCard = (function() {
			var cardData = data;
			return function(){
				contentBody.appendChild(this);
				this.getElementsByClassName('card-img')[0].style.minHeight = "250px";
				this.getElementsByClassName('card-img')[0].style.backgroundSize = "cover";
				this.getElementsByClassName('card-desc')[0].innerHTML = cardData['desc'].substring(0,150)+"...";
				this.getElementsByClassName('link')[0].innerHTML = cardData['date'];
				this.getElementsByClassName('mdl-button--fab')[0].style.display = "";
				this.getElementsByClassName('read-more')[0].style.display = "";
				this.classList.add("mdl-cell--4-col"); 
				this.classList.remove("mdl-cell--12-col");
			};
		})(); 
		divCard.onCard = (function() {
			var cardData = data;
			return function(){	
				eventBody.appendChild(this);
				this.getElementsByClassName('card-img')[0].style.minHeight = "350px";
				this.getElementsByClassName('card-img')[0].style.backgroundSize = "100%";
				this.getElementsByClassName('card-desc')[0].innerHTML = cardData['fullDesc'];
				this.getElementsByClassName('link')[0].innerHTML = "link";
				this.getElementsByClassName('mdl-button--fab')[0].style.display = "none";
				this.getElementsByClassName('read-more')[0].style.display = "none";					
				this.classList.add("mdl-cell--12-col");
				this.classList.remove("mdl-cell--4-col");
				
				history.pushState('', '', "/"+cardData['searchName']);
			};
		})();
		divCard.onmouseover = function(){
			this.classList.add("mdl-shadow--6dp");
			this.classList.remove("mdl-shadow--2dp");
		};
 		divCard.onmouseout = function(){
 			this.classList.add("mdl-shadow--2dp");
 			this.classList.remove("mdl-shadow--6dp");
 		};
 		fabButton.onclick = (function() {
			var card = divCard;
			return function(){				
				var discarded = eventBody.getElementsByClassName('mdl-card');
				for (var i = 0; i < discarded.length; i++) {
   					discarded[i].disCard();
				};
				card.onCard();
				card.scrollIntoView();
			};
		})();

//////////////////// router
		if("/"+data['searchName'] == location.pathname){
			indexPointer = 0;
			divCard.onCard();

// microdate for card
			var microData = document.createElement('script');
			microData.type = 'application/ld+json';
			microData.text = JSON.stringify({
				"@context": "http://schema.org",
   				"@type": "Event",
    			"name": data['name'],
    			"description": data['shortDesc'],
    			"url": window.location.href,
    			"image": data['image'],
   				"startDate": data['startDate'],
   				"endDate": data['endDate'],
   				"location": {
   					"@type": "Place",
   					"name": data['locationName'],
   					"address": data['locationAddress']
				},
				"Performer": {
					"@type": "Organization",
					"name": data['orgName'],
					"url": data['orgUrl']
				},
					"offers": {
    				"@type": "Offer",
    				"url": data['link']
  				}
  			});
  			document.body.appendChild(microData);
		}
	
		//microdata for index page
		var listItem = {
    		"@type": "ListItem",
    		"position": microdataListCounter,
    		"item": {
    			"@type": "Event",
    			"name": data['name'],
    			"description": data['shortDesc'],
    			"url": window.location.href,
    			"image": data['image'],
    			"startDate": data['startDate'],
    			"endDate": data['endDate'],
    			"location": {
    				"@type": "Place",
    				"name": data['locationName'],
    				"address": data['locationAddress']
				},
				"Performer": {
					"@type": "Organization",
					"name": data['orgName'],
					"url": data['orgUrl']
				},
				"offers": {
    				"@type": "Offer",
    				"url": data['link']
  				}
      		}
    	};
    	microdataListItems.itemListElement.push(listItem);
    	microdataListCounter++;
    });
});
if(indexPointer==1){
	var listData = document.createElement('script');
	listData.type = 'application/ld+json';
	listData.text = JSON.stringify(microdataListItems);
	document.body.appendChild(listData);
}
</script>
<script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
</body>
</html>